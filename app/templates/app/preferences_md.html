{% extends "app/base.html" %}

{% block title %} Piece assignments {% endblock %}

{% block content %} 

<datalist id = 'people'>
    {% for user in users %}
    <option value = "{{user.username}}">{{user.username}}</option>
    {% endfor %}
</datalist>

<p class = 'missing'>
    <b>People who have not filled out preferences: </b>
    {% for user in missing %}
    {{user.username}} 
    {% endfor %}
</p>


<form action = "{% url 'preferences_generate' %}" method = 'post'>
    {% csrf_token %}
    <table id = 'piece_table'>
    <tr><th class = 'piece_table_left'></th><th class = 'piece_table_column'>Piano 1</th class = 'piece_table_column'><th>Piano 2</th><th class = 'piece_table_column'>Piano 3</th><th class = 'piece_table_column'>Piano 4</th><th class = 'piece_table_column'>Piano 5</th></tr>
    {% for piece, tuple in pieces_players %}
    <tr>
    <th class = 'piece_table_left'>{{piece.name}}</th>
    {% for i, player in tuple %}
    <td class = 'piece_table_column'>
    <input type = 'text' class = "input_box" id="{{piece.name}} {{i}}" list = "people" name = "{{piece.name}} {{i}}" value = "{{player}}"  />
    </td>
    {% endfor %}
    </tr>
    {% endfor %}
    </table>
    <input type = 'hidden' name = 'hard' value = 'hard' />
    <input type = 'checkbox' id = "hard" name = 'hard' value = 'expHard' />
    <label for = 'expHard'>Include "hard if necessary" for hard parts </label> 
    <input type = 'hidden' name = 'multiple' value = 'multiple' />
    <input type = 'checkbox' id = "multiple" name = 'multiple' value = 'expMultiple' />
    <label for = '{{piece.name}}'>Include "multiple pieces if necessary" </label> <br> 
    <input class = 'clickable' type="submit" value="Save">
</form>



<div id = "bottom-menu">
<div id = 'comments' class = 'box'>
    <b> Comments </b>
    <table id = 'comment-table'>
    {% for user, comment in comments %}
    <tr>
        <th>{{user}}:</th>
        <td><div class = 'comment-text'>{{comment}}</div></td>
    </tr>
    {% endfor %}
    </table>
</div>
<div id = 'suggested_matchings' class = 'box'>
<b>Suggestions </b> <br>
{% for option in matching_list %}
{% for piece in option %}
{{piece}}
<br>
{% endfor %}
<br> 
{% endfor %}
</div>
<div id = 'table-of-preferences'> 
<table id = 'pref_table'>
<tr><th></th><th>hard</th><th>multiple</th>
{% for piece in piece_names %}<th>{{piece}}</th>
{% endfor %}</tr>
{% for name, row in table %}
<tr>
    <th>{{name}}</th>
    {% for entry in row %}<td>{{entry}}</td>{% endfor %}
</tr>
{% endfor %}
</table>

</div>
</div>



{% endblock %} 